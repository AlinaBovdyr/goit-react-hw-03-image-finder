{"version":3,"sources":["components/Button/Button.module.css","components/Searchbar/Searchbar.js","services/searchImgApi.js","components/ImageGallery/ImageGalleryItem.js","components/ImageGallery/ImageGallery.js","components/Button/Button.js","components/Views/ImageInfo.js","App.js","index.js","components/Searchbar/Searchbar.module.css","components/ImageGallery/ImageGallery.module.css"],"names":["module","exports","Searchbar","state","searchQuery","handleInputChange","event","value","target","setState","handleSubmit","preventDefault","trim","toast","error","props","onSubmit","this","className","s","SearchForm","type","button","buttonLabel","SearchInput","autoComplete","autoFocus","placeholder","onChange","Component","api","fetchImage","searchImg","page","searchParams","URLSearchParams","q","image_type","orientation","per_page","key","url","fetch","then","response","ok","json","Promise","reject","Error","ImageGalleryItem","description","GalleryItem","src","alt","GalleryItemImage","ImageGallery","hits","map","id","webformatURL","tags","Button","onBtnClick","onClick","ImageInfo","images","status","showBtn","fetchImages","currentQuery","query","currentPage","imageAPI","length","prevState","catch","prevProps","bottom","document","querySelector","getBoundingClientRect","body","clientHeight","snapshot","window","scrollTo","top","behavior","message","App","handleFormSubmit","autoClose","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.8d1ef210.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"Button\":\"Button_Button__2f9Uu\"};","import React, { Component } from 'react';\nimport { toast } from 'react-toastify';\nimport s from './Searchbar.module.css';\n\nexport default class Searchbar extends Component {\n  state = {\n    searchQuery: '',\n  };\n\n  handleInputChange = event => {\n    const { value } = event.target;\n\n    this.setState({\n      searchQuery: value,\n    });\n  };\n\n  handleSubmit = event => {\n    event.preventDefault();\n    const { searchQuery } = this.state;\n\n    if (searchQuery.trim() === '') {\n      return toast.error('Please, enter your search query!');\n    }\n\n    this.props.onSubmit(searchQuery);\n\n    this.setState({\n      searchQuery: '',\n    });\n  };\n\n  render() {\n    const { searchQuery } = this.state;\n    return (\n      <header className={s.Searchbar}>\n        <form className={s.SearchForm} onSubmit={this.handleSubmit}>\n          <button type=\"submit\" className={s.button}>\n            <span className={s.buttonLabel}>Search</span>\n          </button>\n\n          <input\n            className={s.SearchInput}\n            type=\"text\"\n            autoComplete=\"off\"\n            autoFocus\n            placeholder=\"Search images and photos\"\n            value={searchQuery}\n            onChange={this.handleInputChange}\n          />\n        </form>\n      </header>\n    );\n  }\n}\n","// https://pixabay.com/api/?q=что_искать&page=номер_страницы&key=твой_ключ&image_type=photo&orientation=horizontal&per_page=12\n\nconst BASE_URL = 'https://pixabay.com/api/';\nconst KEY = '19151711-be14d41e7a0bdcd70a93cb54b';\n\nfunction fetchImage(searchImg, page) {\n  const searchParams = new URLSearchParams({\n    q: searchImg,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    page: page,\n    per_page: 12,\n    key: KEY,\n  });\n\n  const url = `${BASE_URL}?${searchParams}`;\n\n  return fetch(url).then(response => {\n    if (response.ok) {\n      return response.json();\n    }\n\n    return Promise.reject(\n      new Error(`Bad search query :( We have no ${searchImg} images`),\n    );\n  });\n}\n\nconst api = { fetchImage };\nexport default api;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport s from './ImageGallery.module.css';\n\nconst ImageGalleryItem = ({ url, description }) => {\n  return (\n          <li className={s.GalleryItem}>\n            <img src={url} alt={description} className={s.GalleryItemImage} />\n          </li>\n  );\n};\n\nImageGalleryItem.propTypes = {\n  url: PropTypes.string,\n  description: PropTypes.string,\n};\n\nexport default ImageGalleryItem;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport ImageGalleryItem from './ImageGalleryItem';\nimport s from './ImageGallery.module.css';\n\nconst ImageGallery = ({hits}) => {\n    return (\n        <ul className={s.ImageGallery}>\n            {hits.map(({ id, webformatURL, tags }) => {\n                return <ImageGalleryItem key={id} url={webformatURL} description={tags}/>\n            })}            \n        </ul>\n    );\n};\n\nImageGallery.propTypes = {\n    hits: PropTypes.arrayOf(PropTypes.shape({\n      id: PropTypes.number.isRequired,\n    }))\n};\n\nexport default ImageGallery;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport s from './Button.module.css';\n\nconst Button = ({ onBtnClick }) => {\n  return (\n    <button type=\"button\" className={s.Button} onClick={onBtnClick}>\n      Load more\n    </button>\n  );\n};\n\nButton.propTypes = {\n  onBtnClick: PropTypes.func,\n};\n\nexport default Button;\n","import React, { Component } from 'react';\r\nimport imageAPI from '../../services/searchImgApi';\r\nimport ImageGallery from '../ImageGallery';\r\nimport Button from '../Button';\r\n\r\nexport default class ImageInfo extends Component {\r\n    state = {\r\n        images: [],\r\n        status: 'idle',\r\n        error: null,\r\n        page: 1,\r\n        showBtn: true,\r\n    };\r\n\r\n    getSnapshotBeforeUpdate(prevProps, prevState) {\r\n        const prevImages = prevState.images;\r\n\r\n        if (prevImages.length > 0) {\r\n            const listRef = document.querySelector('ul');\r\n            const { bottom } = listRef.getBoundingClientRect();\r\n            const PAD = 48;\r\n            const position = document.body.clientHeight - (bottom/4 + PAD);\r\n            return position;\r\n        }\r\n        \r\n        return null;\r\n    }\r\n    \r\n    componentDidUpdate(prevProps, prevState, snapshot) {\r\n        const prevQuery = prevProps.query;\r\n        const currentQuery = this.props.query;\r\n\r\n        if (prevQuery !== currentQuery) {\r\n            this.setState({\r\n                status: 'pending',\r\n                images: [],\r\n                page: 1,\r\n                showBtn: true,\r\n            });\r\n\r\n            this.fetchImages();\r\n        } else {\r\n            if (snapshot !== null) {\r\n                window.scrollTo({\r\n                    top: snapshot,\r\n                    behavior: 'smooth',\r\n                });\r\n            }\r\n        }   \r\n    }\r\n    \r\n    fetchImages = () => {\r\n        const currentQuery = this.props.query;\r\n        const currentPage = this.state.page;\r\n       \r\n        imageAPI\r\n            .fetchImage(currentQuery, currentPage)\r\n            .then(({ hits }) => {\r\n                if (hits.length === 0) {\r\n                    return Promise.reject(\r\n                        new Error(`Bad search query :( We have no ${currentQuery} images`),\r\n                    );\r\n                }\r\n\r\n                if (hits.length < 12) {\r\n                    this.setState({ showBtn: false })\r\n                } \r\n\r\n                this.setState(prevState => ({\r\n                    images: [...prevState.images, ...hits],\r\n                    page: prevState.page + 1,\r\n                    status: 'resolved',\r\n                }));\r\n            })\r\n            .catch(error =>\r\n                this.setState({ error, status: 'rejected' }),\r\n            );\r\n    }\r\n\r\n    render() {\r\n        const { images, status, error, showBtn } = this.state;\r\n\r\n        if (status === 'idle') {\r\n            return <p>Enter in the searchbar the images you want to search</p>;\r\n        }\r\n\r\n        if (status === 'pending') {\r\n            return <div>Loading...</div>;\r\n        }\r\n\r\n        if (status === 'rejected') {\r\n            return <div>{error.message}</div>;\r\n        }\r\n\r\n        if (status === 'resolved') {\r\n            return (\r\n                <>\r\n                    <ImageGallery hits={images}/>\r\n                    {showBtn && <Button onBtnClick={this.fetchImages} />}\r\n                </>\r\n            );\r\n        }\r\n    }\r\n}\r\n","import React, { Component } from 'react';\nimport { ToastContainer } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport './App.css';\n\nimport Searchbar from './components/Searchbar';\nimport ImageInfo from './components/Views/ImageInfo';\n\nclass App extends Component {\n  state = {\n    searchQuery: '',\n  };\n\n  handleFormSubmit = query => {\n    this.setState({\n      searchQuery: query,\n    });\n  };\n\n  render() {\n    const { searchQuery } = this.state;\n\n    return (\n      <div className=\"App\">\n        <Searchbar onSubmit={this.handleFormSubmit} />\n        <ImageInfo query={searchQuery} />\n        <ToastContainer autoClose={2500} />\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport './index.css';\nimport 'modern-normalize/modern-normalize.css';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Searchbar\":\"Searchbar_Searchbar__1pZ79\",\"SearchForm\":\"Searchbar_SearchForm__Wl2OV\",\"button\":\"Searchbar_button__3qkVQ\",\"buttonLabel\":\"Searchbar_buttonLabel__2uW3U\",\"SearchInput\":\"Searchbar_SearchInput__hfh_i\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGallery\":\"ImageGallery_ImageGallery__1-Fqd\",\"GalleryItem\":\"ImageGallery_GalleryItem__2hDxC\",\"GalleryItemImage\":\"ImageGallery_GalleryItemImage__3LYbl\"};"],"sourceRoot":""}