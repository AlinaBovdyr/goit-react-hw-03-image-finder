{"version":3,"sources":["components/ErrorView/ErrorView.module.css","components/Button/Button.module.css","components/Loader/Loader.module.css","components/InitialView/InitialView.module.css","components/Searchbar/Searchbar.js","services/searchImgApi.js","components/ImageGallery/ImageGalleryItem.js","components/ImageGallery/ImageGallery.js","components/Button/Button.js","components/Loader/Loader.js","components/InitialView/InitialView.js","components/ErrorView/error.jpeg","components/ErrorView/ErrorView.js","components/Views/ImageInfo.js","App.js","index.js","components/Searchbar/Searchbar.module.css","components/ImageGallery/ImageGallery.module.css"],"names":["module","exports","Searchbar","state","searchQuery","handleInputChange","event","value","target","setState","handleSubmit","preventDefault","trim","toast","error","props","onSubmit","this","className","s","SearchForm","type","button","buttonLabel","SearchInput","autoComplete","autoFocus","placeholder","onChange","Component","api","fetchImage","searchImg","page","searchParams","URLSearchParams","q","image_type","orientation","per_page","key","url","fetch","then","response","ok","json","Promise","reject","Error","ImageGalleryItem","description","GalleryItem","src","alt","GalleryItemImage","ImageGallery","hits","map","id","webformatURL","tags","Button","onBtnClick","onClick","LoaderImg","loader","color","height","width","timeout","InitialView","text","ErrorView","errorImg","errorImage","errorMessage","ImageInfo","images","status","showBtn","loading","fetchImages","currentQuery","query","currentPage","imageAPI","length","prevState","catch","finally","prevProps","bottom","document","querySelector","getBoundingClientRect","body","clientHeight","snapshot","window","scrollTo","top","behavior","Loader","message","App","handleFormSubmit","autoClose","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.bc4cabc5.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"errorMessage\":\"ErrorView_errorMessage__3jU-l\",\"errorImg\":\"ErrorView_errorImg__4sFRX\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Button\":\"Button_Button__2f9Uu\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"loader\":\"Loader_loader__2Rjw4\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"text\":\"InitialView_text__2n7Sm\"};","import React, { Component } from 'react';\nimport { toast } from 'react-toastify';\nimport s from './Searchbar.module.css';\n\nexport default class Searchbar extends Component {\n  state = {\n    searchQuery: '',\n  };\n\n  handleInputChange = event => {\n    const { value } = event.target;\n\n    this.setState({\n      searchQuery: value,\n    });\n  };\n\n  handleSubmit = event => {\n    event.preventDefault();\n    const { searchQuery } = this.state;\n\n    if (searchQuery.trim() === '') {\n      return toast.error('Please, enter your search query!');\n    }\n\n    this.props.onSubmit(searchQuery);\n\n    this.setState({\n      searchQuery: '',\n    });\n  };\n\n  render() {\n    const { searchQuery } = this.state;\n    return (\n      <header className={s.Searchbar}>\n        <form className={s.SearchForm} onSubmit={this.handleSubmit}>\n          <button type=\"submit\" className={s.button}>\n            <span className={s.buttonLabel}>Search</span>\n          </button>\n\n          <input\n            className={s.SearchInput}\n            type=\"text\"\n            autoComplete=\"off\"\n            autoFocus\n            placeholder=\"Search images and photos\"\n            value={searchQuery}\n            onChange={this.handleInputChange}\n          />\n        </form>\n      </header>\n    );\n  }\n}\n","// https://pixabay.com/api/?q=что_искать&page=номер_страницы&key=твой_ключ&image_type=photo&orientation=horizontal&per_page=12\n\nconst BASE_URL = 'https://pixabay.com/api/';\nconst KEY = '19151711-be14d41e7a0bdcd70a93cb54b';\n\nfunction fetchImage(searchImg, page) {\n  const searchParams = new URLSearchParams({\n    q: searchImg,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    page: page,\n    per_page: 12,\n    key: KEY,\n  });\n\n  const url = `${BASE_URL}?${searchParams}`;\n\n  return fetch(url).then(response => {\n    if (response.ok) {\n      return response.json();\n    }\n\n    return Promise.reject(\n      new Error(`Bad search query :( We have no ${searchImg} images`),\n    );\n  });\n}\n\nconst api = { fetchImage };\nexport default api;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport s from './ImageGallery.module.css';\n\nconst ImageGalleryItem = ({ url, description }) => {\n  return (\n    <li className={s.GalleryItem}>\n      <img src={url} alt={description} className={s.GalleryItemImage} />\n    </li>\n  );\n};\n\nImageGalleryItem.propTypes = {\n  url: PropTypes.string,\n  description: PropTypes.string,\n};\n\nexport default ImageGalleryItem;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport ImageGalleryItem from './ImageGalleryItem';\nimport s from './ImageGallery.module.css';\n\nconst ImageGallery = ({ hits }) => {\n  return (\n    <ul className={s.ImageGallery}>\n      {hits.map(({ id, webformatURL, tags }) => {\n        return (\n          <ImageGalleryItem key={id} url={webformatURL} description={tags} />\n        );\n      })}\n    </ul>\n  );\n};\n\nImageGallery.propTypes = {\n  hits: PropTypes.arrayOf(\n    PropTypes.shape({\n      id: PropTypes.number.isRequired,\n    }),\n  ),\n};\n\nexport default ImageGallery;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport s from './Button.module.css';\n\nconst Button = ({ onBtnClick }) => {\n  return (\n    <button type=\"button\" className={s.Button} onClick={onBtnClick}>\n      Load more\n    </button>\n  );\n};\n\nButton.propTypes = {\n  onBtnClick: PropTypes.func,\n};\n\nexport default Button;\n","import React from 'react';\r\nimport \"react-loader-spinner/dist/loader/css/react-spinner-loader.css\";\r\nimport Loader from \"react-loader-spinner\";\r\nimport s from './Loader.module.css';\r\n\r\nconst LoaderImg = () => {\r\n    return (\r\n       <Loader className={s.loader} type=\"ThreeDots\" color=\"#5511b2\" height={100} width={200} timeout={3000}/>\r\n    );\r\n};\r\n\r\nexport default LoaderImg;","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport s from './InitialView.module.css';\r\n\r\nconst InitialView = ({text}) => {\r\n    return (\r\n        <p className={s.text}>\r\n            {text}\r\n        </p>\r\n    );\r\n};\r\n\r\nInitialView.propTypes = {\r\n    text: PropTypes.string,\r\n};\r\n\r\nexport default InitialView;","export default __webpack_public_path__ + \"static/media/error.68e486b0.jpeg\";","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport errorImage from './error.jpeg';\r\nimport s from './ErrorView.module.css';\r\n\r\nconst ErrorView = ({text}) => {\r\n    return (\r\n        <>\r\n            <img className={s.errorImg} src={errorImage} alt=\"sadcat\" />\r\n            <p className={s.errorMessage}>\r\n                {text}\r\n            </p>\r\n        </>\r\n    );\r\n};\r\n\r\nErrorView.propTypes = {\r\n    text: PropTypes.string,\r\n};\r\n\r\nexport default ErrorView;","import React, { Component } from 'react';\nimport imageAPI from '../../services/searchImgApi';\nimport ImageGallery from '../ImageGallery';\nimport Button from '../Button';\nimport LoaderImg from '../Loader';\nimport InitialView from '../InitialView';\nimport ErrorView from '../ErrorView';\n\nexport default class ImageInfo extends Component {\n  state = {\n    images: [],\n    status: 'idle',\n    error: null,\n    page: 1,\n    showBtn: true,\n    loading: false,\n  };\n\n  getSnapshotBeforeUpdate(prevProps, prevState) {\n    const prevImages = prevState.images;\n\n      if (prevImages.length > 0) {\n        const listRef = document.querySelector('ul');\n        const { bottom } = listRef.getBoundingClientRect();\n        const position = document.body.clientHeight - bottom + bottom / 8;\n        return position;\n    }\n\n    return null;\n  }\n\n  componentDidUpdate(prevProps, prevState, snapshot) {\n    const prevQuery = prevProps.query;\n      const currentQuery = this.props.query;\n\n    if (prevQuery !== currentQuery) {\n      this.setState({\n        status: 'pending',\n        images: [],\n        page: 1,\n        showBtn: true,\n      });\n\n      this.fetchImages();\n    } else {\n      if (snapshot !== null && prevState.page > 2) {\n        window.scrollTo({\n          top: snapshot,\n          behavior: 'smooth',\n        });\n      }\n    }\n  }\n\n  fetchImages = () => {\n    const currentQuery = this.props.query;\n      const currentPage = this.state.page;\n    \n    this.setState({ loading: true });\n\n    imageAPI\n      .fetchImage(currentQuery, currentPage)\n      .then(({ hits }) => {\n        if (hits.length === 0) {\n          return Promise.reject(\n            new Error(`Bad search query :( We have no ${currentQuery} images`),\n          );\n        }\n\n        if (hits.length < 12) {\n          this.setState({ showBtn: false });\n        }\n\n        this.setState(prevState => ({\n          images: [...prevState.images, ...hits],\n          page: prevState.page + 1,\n          status: 'resolved',\n        }));\n      })\n        .catch(error => this.setState({ error, status: 'rejected' }))\n        .finally(() => this.setState({loading: false}));\n  };\n    \n\n  render() {\n    const { images, status, error, showBtn, loading } = this.state;\n\n    if (status === 'idle') {\n        return <InitialView text=\"Enter in the searchbar the images you want to search\"/>;\n    }\n\n    if (status === 'pending') {\n        return <LoaderImg/>\n    }\n\n    if (status === 'rejected') {\n        return <ErrorView text={error.message} />;\n    }\n\n    if (status === 'resolved') {\n      return (\n        <>\n          <ImageGallery hits={images} />\n              {showBtn && !loading && <Button onBtnClick={this.fetchImages} />}\n              {loading && <LoaderImg/>}\n        </>\n      );\n    }\n  }\n}\n","import React, { Component } from 'react';\nimport { ToastContainer } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport './App.css';\n\nimport Searchbar from './components/Searchbar';\nimport ImageInfo from './components/Views/ImageInfo';\n\nclass App extends Component {\n  state = {\n    searchQuery: '',\n  };\n\n  handleFormSubmit = query => {\n    this.setState({\n      searchQuery: query,\n    });\n  };\n\n  render() {\n    const { searchQuery } = this.state;\n\n    return (\n      <div className=\"App\">\n        <Searchbar onSubmit={this.handleFormSubmit} />\n        <ImageInfo query={searchQuery} />\n        <ToastContainer autoClose={2500} />\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport './index.css';\nimport 'modern-normalize/modern-normalize.css';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Searchbar\":\"Searchbar_Searchbar__1pZ79\",\"SearchForm\":\"Searchbar_SearchForm__Wl2OV\",\"button\":\"Searchbar_button__3qkVQ\",\"buttonLabel\":\"Searchbar_buttonLabel__2uW3U\",\"SearchInput\":\"Searchbar_SearchInput__hfh_i\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGallery\":\"ImageGallery_ImageGallery__1-Fqd\",\"GalleryItem\":\"ImageGallery_GalleryItem__2hDxC\",\"GalleryItemImage\":\"ImageGallery_GalleryItemImage__3LYbl\"};"],"sourceRoot":""}